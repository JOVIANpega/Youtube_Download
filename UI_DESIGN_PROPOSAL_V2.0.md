# YouTube下載器 - 分頁式GUI設計提案 (V2.0)

## 設計概述

新版界面採用分頁式設計，將功能分為三大類：
1. **下載任務** - 管理當前下載佇列
2. **已下載項目** - 瀏覽和管理已完成的下載
3. **設定** - 配置下載器行為

此設計保留並增強了V1.55版本的所有特色功能，同時通過分頁式設計提升用戶體驗，讓功能更加清晰有序，支援批次處理和高級功能。

## 整合V1.55的特色功能

### 🚀 V1.55版本核心功能整合

1. **性能優化**
   - 下載引擎優化 → 整合到下載任務分頁，提供更快速穩定的下載
   - 記憶體使用優化 → 整合到設定分頁的性能優化區塊
   - 並行下載處理改進 → 通過任務佇列管理系統實現

2. **SSL證書問題修復**
   - 自動SSL證書修復 → 整合到設定分頁的網路設定區塊
   - 證書驗證選項 → 提供啟用/禁用SSL驗證的選項

3. **檔案名稱處理改進**
   - 特殊字符支援 → 整合到設定分頁的命名與整理區塊
   - 長檔名處理 → 提供檔案名稱長度限制選項
   - 檔案名稱前綴功能 → 保留並增強此功能

4. **多語言支援更新**
   - 更多語言選項 → 整合到設定分頁的界面設定區塊
   - 翻譯質量優化 → 確保所有新界面元素都有多語言支援

5. **用戶界面改進**
   - 布局和操作流程優化 → 透過分頁式設計實現
   - 更現代化的界面元素 → 使用QSS樣式和主題功能

## 分頁設計詳情

### 🔹 Tab 1：下載任務

**功能特色：**
- **多URL輸入框**：可同時貼入多個網址，每行一個
- **智能解析**：自動識別YouTube、Bilibili等不同平台
- **批次操作**：可同時開始、暫停、刪除多個任務
- **實時監控**：顯示每個檔案的下載進度、速度、ETA
- **自動/手動合併**：控制是否自動合併影片與音訊
- **任務佇列管理**：調整下載優先順序，設置等待、暫停等狀態
- **高解析度選項**：整合V1.55版本的高解析度下載支援
- **智能錯誤處理**：整合V1.55版本的錯誤分析和自動重試功能

**界面元素：**
- 多行文字輸入框（貼入URL）
- "開始下載"、"暫停"、"刪除"按鈕
- "自動合併"切換開關
- 下載任務列表（進度條、速度、ETA）
- 任務狀態指示（下載中、等待、暫停、完成、錯誤）
- 任務控制按鈕（上移、下移、重試等）
- 檔案名稱前綴設定（從V1.55整合）
- 智能錯誤分析提示

### 🔹 Tab 2：已下載項目 / 檔案管理

**功能特色：**
- **檔案庫視圖**：所有已下載項目的縮圖和資訊
- **篩選與排序**：按日期、大小、格式等篩選和排序
- **檔案操作**：開啟檔案、開啟所在資料夾、重新命名、刪除
- **批次管理**：支援多選和批次操作
- **手動合併**：選擇影片和音訊檔案進行後期合併
- **內建預覽**：簡易預覽影片和音訊內容
- **檔案詳情**：顯示解析度、音訊品質、檔案大小等詳細資訊
- **下載完成對話框**：整合V1.55版本的下載完成提醒功能

**界面元素：**
- 檔案瀏覽網格/列表切換視圖
- 檔案搜尋和篩選控件
- 檔案操作工具列
- 右鍵選單（包含所有檔案操作）
- 檔案詳情側邊欄
- 預覽視窗

### 🔹 Tab 3：設定

**功能特色：**
- **基本設定**：下載路徑、預設格式、命名規則等
- **格式與品質**：
  - 預設解析度選擇（整合V1.55高解析度支援）
  - 格式選項（MP4、WebM等）
  - 音訊質量設定
- **網路設定**：
  - SSL證書問題修復（整合V1.55功能）
  - 代理伺服器設定
  - 連接重試次數
  - 超時設定
- **性能優化**：
  - 同時下載數量
  - 下載限速
  - 多執行緒設定
  - 記憶體使用限制
- **命名與整理**：
  - 檔案名稱前綴管理（整合V1.55功能）
  - 特殊字符處理方式
  - 長檔名處理選項
  - 目錄結構設定
- **界面設定**：
  - 主題選擇
  - 語言設定（整合V1.55多語言支援）
  - 字體大小調整
  - 啟動選項
- **整合與外掛**：
  - FFmpeg管理（整合V1.55的FFmpeg自動下載）
  - 外部播放器設定
  - 瀏覽器外掛連動
- **備份還原**：
  - 匯出/匯入設定
  - 重置設定
  - 用戶偏好管理

**界面元素：**
- 設定分類導航（左側）
- 設定項控件（右側）
- 套用、取消、重設按鈕
- 工具提示和說明文字
- FFmpeg路徑管理界面

## 視覺設計

```
╔══════════════════════════════════════════════════════════════╗
║  YouTube下載器 V2.0                                 □ □ ×    ║
╠══════════════════════════════════════════════════════════════╣
║ [◉ 下載任務] [  已下載項目  ] [  設定  ]                     ║
╠══════════════════════════════════════════════════════════════╣
║ ┌─ 貼入一個或多個YouTube網址 ─────────────────────────┐      ║
║ │ https://youtube.com/watch?v=xxxxxxxxxxx              │      ║
║ │ https://youtube.com/watch?v=yyyyyyyyyyy              │      ║
║ │ https://youtube.com/watch?v=zzzzzzzzzzz              │      ║
║ └──────────────────────────────────────────────────────┘      ║
║                                                              ║
║ [開始下載] [暫停所有] [刪除選取]    [✓] 自動合併              ║
║                                                              ║
║ ┌─ 下載選項 ─────────────────────────────────────────┐        ║
║ │ 格式: [最高品質 ▼]  解析度: [1080p ▼]  前綴: [TEST-]      │        ║
║ └─────────────────────────────────────────────────────┘        ║
║                                                              ║
║ ┌─ 下載佇列 ─────────────────────────────────────────────┐    ║
║ │ ▶ 樂團現場演唱會.mp4  ███████████▁▁▁▁▁▁ 65% 5.2MB/s    │    ║
║ │   ETA: 01:20 剩餘 250MB                               │    ║
║ │                                                       │    ║
║ │ ⏸ 實用教學影片.mp4   ██████▁▁▁▁▁▁▁▁▁▁▁▁ 32% (已暫停)   │    ║
║ │                                                       │    ║
║ │ ⏳ 音樂MV合輯.mp4    ⠿⠿⠿⠿⠿⠿⠿⠿⠿⠿⠿⠿ 等待中...       │    ║
║ │                                                       │    ║
║ │ ❌ 私人影片.mp4      錯誤：年齡限制 [重試] [詳情]        │    ║
║ └───────────────────────────────────────────────────────┘    ║
║                                                              ║
║ 總進度：2/4 完成 | 總剩餘時間：約 15 分鐘                    ║
╚══════════════════════════════════════════════════════════════╝

╔══════════════════════════════════════════════════════════════╗
║  YouTube下載器 V2.0                                 □ □ ×    ║
╠══════════════════════════════════════════════════════════════╣
║ [  下載任務  ] [◉ 已下載項目 ] [  設定  ]                    ║
╠══════════════════════════════════════════════════════════════╣
║ [搜尋...]   排序: [最近下載 ▼]   顯示: [■ 網格] [☐ 列表]     ║
║                                                              ║
║ ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐           ║
║ │  ▶      │  │  ▶      │  │  ♫      │  │  ▶      │           ║
║ │         │  │         │  │         │  │         │           ║
║ │ 影片1   │  │ 影片2   │  │ 音訊1   │  │ 影片3   │           ║
║ │ 1080p   │  │ 720p    │  │ MP3     │  │ 4K      │           ║
║ │ 20分鐘  │  │ 5分鐘   │  │ 3分鐘   │  │ 15分鐘  │           ║
║ │ 2024-12-31 │  │ 2024-12-30 │  │ 2024-12-29 │  │ 2024-12-28 │           ║
║ └─────────┘  └─────────┘  └─────────┘  └─────────┘           ║
║                                                              ║
║ [開啟所在資料夾] [刪除選取] [合併選取的影片和音訊]           ║
║                                                              ║
║ ┌─ 檔案詳情 ─────────────────────────────────────────────┐    ║
║ │ 檔案名稱：影片1.mp4                                    │    ║
║ │ 影片解析度：1920x1080 (1080p)                          │    ║
║ │ 檔案大小：235.4 MB                                     │    ║
║ │ 下載時間：2024-12-31 15:42:30                          │    ║
║ │ 原始連結：https://youtube.com/watch?v=xxxxxxxxxxx       │    ║
║ └───────────────────────────────────────────────────────┘    ║
╚══════════════════════════════════════════════════════════════╝

╔══════════════════════════════════════════════════════════════╗
║  YouTube下載器 V2.0                                 □ □ ×    ║
╠══════════════════════════════════════════════════════════════╣
║ [  下載任務  ] [  已下載項目  ] [◉ 設定  ]                   ║
╠═════════════════╦══════════════════════════════════════════╣
║ ■ 基本設定      ║ ┌─ 下載設定 ───────────────────────────┐ ║
║ □ 格式與品質    ║ │                                      │ ║
║ □ 網路設定      ║ │ 下載資料夾:  [C:\Users\Downloads] [瀏覽] │ ║
║ □ 性能優化      ║ │                                      │ ║
║ □ 命名與整理    ║ │ 同時下載數量: [2 ▼]                  │ ║
║ □ 界面設定      ║ │                                      │ ║
║ □ 整合與外掛    ║ │ 下載完成時:                          │ ║
║ □ 備份與還原    ║ │ [✓] 顯示通知                         │ ║
║                 ║ │ [✓] 播放提示音                       │ ║
║                 ║ │ [ ] 自動開啟資料夾                    │ ║
║                 ║ │                                      │ ║
║                 ║ │ 檔案已存在時:                        │ ║
║                 ║ │ ( ) 詢問處理方式                      │ ║
║                 ║ │ (•) 自動重新命名                      │ ║
║                 ║ │ ( ) 覆寫現有檔案                      │ ║
║                 ║ │                                      │ ║
║                 ║ └──────────────────────────────────────┘ ║
║                 ║                                          ║
║                 ║ [ 套用 ] [ 取消 ]  [ 重設為預設值 ]      ║
╚═════════════════╩══════════════════════════════════════════╝
```

## 技術實現建議

### 框架選擇
- **PySide6**：與目前程式碼基礎相容，提供現代化的UI控件
- **自訂控件**：開發自訂進度條、檔案卡片視圖等組件
- **Qt樣式表**：使用QSS美化界面，支援主題切換

### 代碼組織
- 採用 Model-View-Controller (MVC) 模式組織代碼
- 使用 `QTabWidget` 作為主要容器
- 每個分頁實現為獨立的 `QWidget` 類
- 使用信號槽機制實現頁面間通信
- 重用V1.55版本的核心功能類和方法

### 實現重點
1. **任務管理系統**：
   - 使用隊列管理下載任務
   - 實現優先級和依賴關係處理
   - 支援暫停/恢復/取消操作
   - 整合V1.55的多層備用下載策略

2. **檔案管理系統**：
   - 建立本地資料庫追蹤已下載檔案
   - 實現縮圖生成和快取
   - 支援檔案元資料提取和顯示
   - 整合V1.55的檔案名稱處理功能

3. **設定系統**：
   - 使用 JSON 儲存用戶偏好
   - 實現設定即時應用和保存
   - 提供設定匯入/匯出功能
   - 整合V1.55的用戶偏好管理系統

4. **FFmpeg管理**：
   - 整合V1.55的FFmpeg自動下載功能
   - 提供FFmpeg路徑管理界面
   - 支援跨平台FFmpeg檢測

## 改進路線圖

### 第一階段：基礎分頁結構
- 實現三頁式基本框架
- 遷移現有功能到新結構
- 完成基礎設定頁面
- 整合V1.55的SSL修復功能

### 第二階段：下載任務增強
- 實現多URL輸入和批次處理
- 添加任務佇列管理功能
- 增強進度顯示和控制選項
- 整合V1.55的性能優化和高解析度支援

### 第三階段：檔案管理功能
- 開發檔案庫瀏覽視圖
- 添加檔案操作功能
- 實現檔案詳情和預覽
- 整合V1.55的檔案名稱前綴功能

### 第四階段：高級功能和完善
- 添加手動合併工具
- 實現主題切換和外觀自訂
- 添加數據統計和使用報告
- 優化性能和使用者體驗
- 整合V1.55的多語言支援更新

## V1.55與V2.0功能對照表

| V1.55功能 | V2.0整合方式 |
|-----------|------------|
| 性能優化 | 整合到下載任務分頁和性能優化設定 |
| SSL證書問題修復 | 整合到網路設定分頁 |
| 檔案名稱處理改進 | 整合到命名與整理設定 |
| 多語言支援更新 | 整合到界面設定分頁 |
| 用戶界面改進 | 通過整個分頁式設計實現 |
| 高解析度下載支援 | 整合到下載任務分頁的格式選項 |
| 檔案名稱前綴功能 | 整合到下載任務分頁和命名設定 |
| FFmpeg自動下載 | 整合到整合與外掛設定 |
| 多層備用下載策略 | 整合到下載引擎和錯誤處理邏輯 |
| 智能錯誤分析 | 整合到下載任務分頁的錯誤提示 |
| 下載完成對話框 | 整合到已下載項目和通知功能 |

## 總結

此分頁式設計完全保留並增強了V1.55版本的所有特色功能，同時通過全新的分頁結構大幅提升用戶體驗，讓功能更加條理分明。透過將相關功能分組到專用分頁，使用者可以更直覺地操作程式，同時保持界面簡潔有序。

新設計採用現代化UI元素和佈局，遵循主流設計準則，確保操作流暢且視覺美觀。同時，通過整合V1.55版本的優秀功能，確保用戶在使用新版界面時不會失去任何已有功能，反而能獲得更好的使用體驗。 