# YouTube下載器 - 分頁式GUI設計提案 (V2.0)

## 設計概述

新版界面採用分頁式設計，將功能分為三大類：
1. **下載任務** - 管理當前下載佇列
2. **已下載項目** - 瀏覽和管理已完成的下載
3. **設定** - 配置下載器行為

此設計旨在提升用戶體驗，讓功能更加清晰有序，同時支援批次處理和高級功能。

## 分頁設計詳情

### 🔹 Tab 1：下載任務

**功能特色：**
- **多URL輸入框**：可同時貼入多個網址，每行一個
- **智能解析**：自動識別YouTube、Bilibili等不同平台
- **批次操作**：可同時開始、暫停、刪除多個任務
- **實時監控**：顯示每個檔案的下載進度、速度、ETA
- **自動/手動合併**：控制是否自動合併影片與音訊
- **任務佇列管理**：調整下載優先順序，設置等待、暫停等狀態

**界面元素：**
- 多行文字輸入框（貼入URL）
- "開始下載"、"暫停"、"刪除"按鈕
- "自動合併"切換開關
- 下載任務列表（進度條、速度、ETA）
- 任務狀態指示（下載中、等待、暫停、完成、錯誤）
- 任務控制按鈕（上移、下移、重試等）

### 🔹 Tab 2：已下載項目 / 檔案管理

**功能特色：**
- **檔案庫視圖**：所有已下載項目的縮圖和資訊
- **篩選與排序**：按日期、大小、格式等篩選和排序
- **檔案操作**：開啟檔案、開啟所在資料夾、重新命名、刪除
- **批次管理**：支援多選和批次操作
- **手動合併**：選擇影片和音訊檔案進行後期合併
- **內建預覽**：簡易預覽影片和音訊內容
- **檔案詳情**：顯示解析度、音訊品質、檔案大小等詳細資訊

**界面元素：**
- 檔案瀏覽網格/列表切換視圖
- 檔案搜尋和篩選控件
- 檔案操作工具列
- 右鍵選單（包含所有檔案操作）
- 檔案詳情側邊欄
- 預覽視窗

### 🔹 Tab 3：設定

**功能特色：**
- **基本設定**：下載路徑、預設格式、命名規則等
- **進階設定**：同時下載數量、網路設定、多執行緒
- **性能設定**：下載限速、磁碟寫入緩衝、記憶體使用限制
- **外觀設定**：主題、語言、字體大小等
- **整合設定**：FFmpeg路徑、外部播放器、瀏覽器外掛連動
- **備份還原**：匯出/匯入設定、重置設定

**界面元素：**
- 設定分類導航（左側）
- 設定項控件（右側）
- 套用、取消、重設按鈕
- 工具提示和說明文字

## 視覺設計

```
╔══════════════════════════════════════════════════════════════╗
║  YouTube下載器 V2.0                                 □ □ ×    ║
╠══════════════════════════════════════════════════════════════╣
║ [◉ 下載任務] [  已下載項目  ] [  設定  ]                     ║
╠══════════════════════════════════════════════════════════════╣
║ ┌─ 貼入一個或多個YouTube網址 ─────────────────────────┐      ║
║ │ https://youtube.com/watch?v=xxxxxxxxxxx              │      ║
║ │ https://youtube.com/watch?v=yyyyyyyyyyy              │      ║
║ │ https://youtube.com/watch?v=zzzzzzzzzzz              │      ║
║ └──────────────────────────────────────────────────────┘      ║
║                                                              ║
║ [開始下載] [暫停所有] [刪除選取]    [✓] 自動合併              ║
║                                                              ║
║ ┌─ 下載佇列 ─────────────────────────────────────────────┐    ║
║ │ ▶ 樂團現場演唱會.mp4  ███████████▁▁▁▁▁▁ 65% 5.2MB/s    │    ║
║ │   ETA: 01:20 剩餘 250MB                               │    ║
║ │                                                       │    ║
║ │ ⏸ 實用教學影片.mp4   ██████▁▁▁▁▁▁▁▁▁▁▁▁ 32% (已暫停)   │    ║
║ │                                                       │    ║
║ │ ⏳ 音樂MV合輯.mp4    ⠿⠿⠿⠿⠿⠿⠿⠿⠿⠿⠿⠿ 等待中...       │    ║
║ │                                                       │    ║
║ │ ❌ 私人影片.mp4      錯誤：年齡限制 [重試] [詳情]        │    ║
║ └───────────────────────────────────────────────────────┘    ║
║                                                              ║
║ 總進度：2/4 完成 | 總剩餘時間：約 15 分鐘                    ║
╚══════════════════════════════════════════════════════════════╝

╔══════════════════════════════════════════════════════════════╗
║  YouTube下載器 V2.0                                 □ □ ×    ║
╠══════════════════════════════════════════════════════════════╣
║ [  下載任務  ] [◉ 已下載項目 ] [  設定  ]                    ║
╠══════════════════════════════════════════════════════════════╣
║ [搜尋...]   排序: [最近下載 ▼]   顯示: [■ 網格] [☐ 列表]     ║
║                                                              ║
║ ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐           ║
║ │  ▶      │  │  ▶      │  │  ♫      │  │  ▶      │           ║
║ │         │  │         │  │         │  │         │           ║
║ │ 影片1   │  │ 影片2   │  │ 音訊1   │  │ 影片3   │           ║
║ │ 1080p   │  │ 720p    │  │ MP3     │  │ 4K      │           ║
║ │ 20分鐘  │  │ 5分鐘   │  │ 3分鐘   │  │ 15分鐘  │           ║
║ │ 2024-12-31 │  │ 2024-12-30 │  │ 2024-12-29 │  │ 2024-12-28 │           ║
║ └─────────┘  └─────────┘  └─────────┘  └─────────┘           ║
║                                                              ║
║ [開啟所在資料夾] [刪除選取] [合併選取的影片和音訊]           ║
║                                                              ║
║ ┌─ 檔案詳情 ─────────────────────────────────────────────┐    ║
║ │ 檔案名稱：影片1.mp4                                    │    ║
║ │ 影片解析度：1920x1080 (1080p)                          │    ║
║ │ 檔案大小：235.4 MB                                     │    ║
║ │ 下載時間：2024-12-31 15:42:30                          │    ║
║ │ 原始連結：https://youtube.com/watch?v=xxxxxxxxxxx       │    ║
║ └───────────────────────────────────────────────────────┘    ║
╚══════════════════════════════════════════════════════════════╝

╔══════════════════════════════════════════════════════════════╗
║  YouTube下載器 V2.0                                 □ □ ×    ║
╠══════════════════════════════════════════════════════════════╣
║ [  下載任務  ] [  已下載項目  ] [◉ 設定  ]                   ║
╠═════════════════╦══════════════════════════════════════════╣
║ ■ 基本設定      ║ ┌─ 下載設定 ───────────────────────────┐ ║
║ □ 格式與品質    ║ │                                      │ ║
║ □ 網路設定      ║ │ 下載資料夾:  [C:\Users\Downloads] [瀏覽] │ ║
║ □ 性能優化      ║ │                                      │ ║
║ □ 命名與整理    ║ │ 同時下載數量: [2 ▼]                  │ ║
║ □ 界面設定      ║ │                                      │ ║
║ □ 整合與外掛    ║ │ 下載完成時:                          │ ║
║ □ 備份與還原    ║ │ [✓] 顯示通知                         │ ║
║                 ║ │ [✓] 播放提示音                       │ ║
║                 ║ │ [ ] 自動開啟資料夾                    │ ║
║                 ║ │                                      │ ║
║                 ║ │ 檔案已存在時:                        │ ║
║                 ║ │ ( ) 詢問處理方式                      │ ║
║                 ║ │ (•) 自動重新命名                      │ ║
║                 ║ │ ( ) 覆寫現有檔案                      │ ║
║                 ║ │                                      │ ║
║                 ║ └──────────────────────────────────────┘ ║
║                 ║                                          ║
║                 ║ [ 套用 ] [ 取消 ]  [ 重設為預設值 ]      ║
╚═════════════════╩══════════════════════════════════════════╝
```

## 技術實現建議

### 框架選擇
- **PySide6**：與目前程式碼基礎相容，提供現代化的UI控件
- **自訂控件**：開發自訂進度條、檔案卡片視圖等組件
- **Qt樣式表**：使用QSS美化界面，支援主題切換

### 代碼組織
- 採用 Model-View-Controller (MVC) 模式組織代碼
- 使用 `QTabWidget` 作為主要容器
- 每個分頁實現為獨立的 `QWidget` 類
- 使用信號槽機制實現頁面間通信

### 實現重點
1. **任務管理系統**：
   - 使用隊列管理下載任務
   - 實現優先級和依賴關係處理
   - 支援暫停/恢復/取消操作

2. **檔案管理系統**：
   - 建立本地資料庫追蹤已下載檔案
   - 實現縮圖生成和快取
   - 支援檔案元資料提取和顯示

3. **設定系統**：
   - 使用 JSON 儲存用戶偏好
   - 實現設定即時應用和保存
   - 提供設定匯入/匯出功能

## 改進路線圖

### 第一階段：基礎分頁結構
- 實現三頁式基本框架
- 遷移現有功能到新結構
- 完成基礎設定頁面

### 第二階段：下載任務增強
- 實現多URL輸入和批次處理
- 添加任務佇列管理功能
- 增強進度顯示和控制選項

### 第三階段：檔案管理功能
- 開發檔案庫瀏覽視圖
- 添加檔案操作功能
- 實現檔案詳情和預覽

### 第四階段：高級功能和完善
- 添加手動合併工具
- 實現主題切換和外觀自訂
- 添加數據統計和使用報告
- 優化性能和使用者體驗

## 總結

此分頁式設計將大幅提升用戶體驗，讓功能更加條理分明，同時支援更多高級功能。透過將相關功能分組到專用分頁，使用者可以更直覺地操作程式，同時保持界面簡潔有序。

該設計採用現代化UI元素和佈局，遵循主流設計準則，確保操作流暢且視覺美觀。同時保留了原有的多語言支援和用戶偏好設定。 