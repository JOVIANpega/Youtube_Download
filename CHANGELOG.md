# 變更日誌 / Changelog / 変更ログ / 변경 로그

## [V1.69] - 2025-07-06

### 🔧 增強的錯誤處理系統
- **yt-dlp 失敗檢測**: 智能識別yt-dlp執行失敗的各種情況
- **外部下載工具整合**: 自動推薦並打開外部下載工具
- **平台特定錯誤處理**: 針對不同平台提供專屬解決方案
- **用戶友善的錯誤訊息**: 更清晰的錯誤說明和解決建議

### 🌐 外部下載工具整合
- **Twitter Video Downloader**: 專門處理X.com/Twitter影片下載失敗
- **自動URL帶入**: 對於X.com平台，自動將原URL帶入外部工具
- **多平台工具推薦**: 提供Instagram、TikTok、YouTube等平台的專用工具
- **一鍵打開瀏覽器**: 點擊按鈕即可在瀏覽器中打開外部工具

### 🎨 改進的錯誤對話框
- **視覺化警告設計**: 使用警告色調和圖標突出顯示
- **分層信息展示**: 主要訊息、工具推薦、技術詳情分開顯示
- **互動式連結**: 可直接點擊打開推薦的外部工具
- **保留原有功能**: 重試、更改格式、保存日誌等功能完整保留

### 🛠️ 技術改進
- **智能錯誤檢測**: 基於關鍵詞和錯誤類型的自動分類
- **跨平台瀏覽器支援**: 支援Windows、macOS、Linux的瀏覽器打開
- **非阻塞UI更新**: 錯誤處理不影響主執行緒
- **向後相容性**: 保持與現有錯誤處理邏輯的相容性

### 📋 新增功能
- yt-dlp失敗檢測機制
- 外部下載工具推薦系統
- 自動瀏覽器打開功能
- 平台特定的外部工具URL處理

## [V1.68] - 2025-07-06

### 🚀 主要新功能
- **增強的平台檢測**: 智能識別影片來源，顯示平台圖標和顏色
- **X.com/Twitter 特殊優化**: 使用手機User-Agent模擬，提高下載成功率
- **改進的進度顯示**: 實時顯示平台名稱、影片標題和下載進度
- **自動清理功能**: 下載完成後自動移除項目，保持界面整潔
- **增強的錯誤處理**: 更友善的錯誤訊息和解決方案建議

### 🔧 技術改進
- **SSL證書修復**: 自動處理SSL證書問題
- **平台特定標頭**: 為不同平台提供最佳化的HTTP標頭
- **更好的相容性**: 支援更多URL格式和平台變體
- **多線程下載**: 非阻塞UI更新，提升用戶體驗

### 🎨 用戶界面改進
- **平台圖標系統**: 每個平台都有專屬圖標和顏色
- **智能URL分析**: 支援x.com、twitter.com等多種URL格式
- **進度標籤優化**: 顯示平台名稱和影片標題
- **動畫效果**: 平滑的項目移除動畫

### 🌐 平台支援增強
- **X.com/Twitter**: 特殊處理，使用iPhone Safari User-Agent
- **Instagram**: 改進DASH格式處理
- **TikTok**: 支援多地區URL格式
- **Bilibili**: 優化B站特有格式處理

### 🐛 錯誤修復
- 修復平台檢測函數導入問題
- 改進錯誤訊息顯示格式
- 優化下載失敗處理邏輯
- 修復SSL證書驗證問題

### 📋 新增功能
- 平台檢測和識別系統
- 平台特定下載選項
- 自動項目清理機制
- 詳細的錯誤診斷報告

## [V1.65] - 2024-07-25

### 🧹 專案清理
- **專案結構優化**：移除不必要的臨時構建檔案，減少倉庫大小
- **目錄結構改進**：優化目錄結構，提高開發和維護效率
- **.gitignore 更新**：改進設定，避免追蹤臨時檔案
- **舊版本整理**：清理舊版本的備份和測試檔案

### 🔧 技術改進
- **打包腳本更新**：更新打包腳本，支援最新版本
- **臨時檔案處理**：改進臨時檔案處理邏輯，自動清理構建過程中產生的檔案
- **打包配置優化**：減少生成的可執行檔大小
- **錯誤處理完善**：提供更清晰的打包錯誤訊息

### 📚 文檔更新
- **README 更新**：添加最新版本資訊和常見問題解答
- **安裝說明完善**：更詳細的安裝和使用指南
- **使用範例更新**：添加更多使用範例和截圖
- **依賴項更新**：更新至最新版本的依賴項

## [V1.60] - 2023-07-02

### 🚀 主要改進
- **性能優化**：提高下載速度和穩定性，減少記憶體使用
- **SSL證書問題修復**：徹底解決各種SSL證書驗證錯誤
- **檔案名稱處理改進**：更好地支援特殊字符和長檔名
- **多語言支援更新**：添加更多語言支援，優化翻譯質量
- **用戶界面改進**：優化布局和操作流程，提升用戶體驗
- **依賴更新**：更新yt-dlp到2025.6.25版本，PySide6到6.9.1版本

### 🔧 技術改進
- 優化下載引擎，提高下載速度
- 改進並行下載處理
- 改進錯誤處理邏輯
- 優化下載進度顯示
- 添加更多下載格式選項

### 🐛 錯誤修復
- 修復SSL證書驗證問題
- 解決年齡限制影片下載失敗的問題
- 修復某些URL解析錯誤
- 修復界面布局問題
- 解決某些特殊字符導致的檔案名稱錯誤

### 📋 新增功能
- 深色模式支援
- 改進下載歷史顯示
- 添加更多下載格式選項
- 優化用戶界面布局
- 全新錯誤處理系統，支援自動重試下載
- 備用下載方法，當標準下載失敗時自動啟用
- 詳細的錯誤診斷與報告功能
- 可保存錯誤日誌以便後續分析
- 根據錯誤類型提供不同解決方案建議

## [V1.55] - 2024-12-31

### 🚀 主要改進
- **性能優化**：提高下載速度和穩定性，減少記憶體使用
- **SSL證書問題修復**：徹底解決各種SSL證書驗證錯誤
- **檔案名稱處理改進**：更好地支援特殊字符和長檔名
- **多語言支援更新**：添加更多語言支援，優化翻譯質量
- **用戶界面改進**：優化布局和操作流程，提升用戶體驗
- **依賴更新**：更新yt-dlp到2025.6.25版本，PySide6到6.9.1版本

### 🔧 技術改進
- 優化下載引擎，提高下載速度
- 改進並行下載處理
- 改進錯誤處理邏輯
- 優化下載進度顯示
- 添加更多下載格式選項

### 🐛 錯誤修復
- 修復SSL證書驗證問題
- 解決年齡限制影片下載失敗的問題
- 修復某些URL解析錯誤
- 修復界面布局問題
- 解決某些特殊字符導致的檔案名稱錯誤

### 📋 新增功能
- 深色模式支援
- 改進下載歷史顯示
- 添加更多下載格式選項
- 優化用戶界面布局

## [V1.45] - 2024-12-30

### 🎯 主要改進
- **自動下載 FFmpeg 功能**: 程式會自動下載 FFmpeg 並存放在本地資料夾，無需手動安裝
- **FFmpeg 路徑管理優化**: 明確指定 FFmpeg 路徑給 yt-dlp，確保合併過程順利進行
- **用戶介面改進**: 添加 FFmpeg 自動下載按鈕，改進狀態顯示和幫助對話框

### 🔧 技術改進
- 優先使用下載的 FFmpeg，如果失敗才嘗試使用系統安裝的版本
- 改進 FFmpeg 檢測邏輯，確保只有在 FFmpeg 真正可用時才使用它
- 使用多線程下載，不會阻塞主界面
- 自動驗證下載的 FFmpeg 是否可用

### 🐛 錯誤修正
- 修復了因 FFmpeg 相關錯誤導致合併視頻和音頻失敗的問題
- 修復了在 FFmpeg 不可用時無法下載高畫質影片的問題
- 改進錯誤處理邏輯，即使 FFmpeg 出現問題，仍能保證下載高畫質視頻檔案

### 📋 新增功能
- FFmpeg 自動下載按鈕
- FFmpeg 狀態顯示
- FFmpeg 幫助對話框更新
- 下載完成後自動清理臨時檔案

## [V1.42] - 2024-12-25

### 🎯 主要改進
- **高解析度下載支援**：改進格式選擇邏輯，支援1080P及更高解析度
- **前綴歷史記錄**：記錄並顯示過往使用的檔案名稱前綴，支援選擇和刪除
- **檢查更新按鈕**：在主界面添加按鈕，一鍵檢查並更新yt-dlp
- **多層備用下載策略**：確保下載成功率，自動嘗試備用格式
- **合併失敗處理**：當視頻和音頻合併失敗時，保留已下載的檔案

### 🎨 界面優化
- **URL輸入框改進**：變大並改為垂直佈局，可容納更多文字
- **界面元素重組**：將相關功能集中在一起，優化用戶體驗

### 🔧 技術改進
- 使用 `bestvideo+bestaudio/best` 格式選擇器替代簡單的 `best`
- 根據選擇的解析度動態調整下載參數
- 改進錯誤處理機制，提供更詳細的錯誤訊息

## [V1.1.3] - 2024-12-19

### 🎯 主要改進
- 友善 UI：開始下載時自動清空日誌，操作更直覺
- 未先獲取資訊時彈窗提示，避免誤操作
- 開啟檔案目錄多層 fallback，最大化協助用戶找到檔案
- 強化檔案名稱清理，避免特殊字元導致問題
- 解析度選單預設 720P，支援自動 fallback webm

### 🐞 錯誤修正
- 修正 explorer 指令失敗時的提示與容錯
- 修正特殊字元檔名導致的開啟失敗

### 🆕 使用體驗
- 下載日誌只顯示本次下載內容
- 操作流程更友善

## [V1.1.2] - 2024-12-19

### 🎯 主要改進
- **檔案名稱前綴功能**: 新增自定義檔案名稱前綴設定
- **智能檔案命名**: 支援前綴 + 影片標題的檔案命名方式
- **設定記憶功能**: 檔案名稱前綴設定會自動記憶
- **檔案名稱清理優化**: 改進特殊字符處理

### 🔧 技術改進
- 新增檔案名稱前綴輸入欄位
- 改進下載線程檔案名稱處理
- 優化用戶偏好設定管理
- 增強檔案名稱安全性

### 📋 新增功能
- 檔案名稱前綴輸入欄位
- 自定義檔案命名支援
- 前綴設定記憶功能
- 檔案名稱清理優化

### 🎨 用戶體驗提升
- 更靈活的檔案命名方式
- 個性化的檔案組織
- 自動記憶用戶偏好
- 更安全的檔案名稱處理

### 💡 使用範例
- 前綴: `PER-`
- 原始標題: `Amazing Video`
- 最終檔案: `PER-Amazing_Video.mp4`

## [V1.1.1] - 2024-12-19

### 🎯 主要改進
- **下載完成自定義對話框**: 新增美觀的下載完成對話框，包含開啟檔案目錄選項
- **開啟檔案目錄功能**: 一鍵開啟下載檔案所在目錄，支援 Windows/macOS/Linux
- **下載完成提醒設定**: 新增選項讓用戶決定是否要顯示下載完成提醒視窗
- **移除對話框音效**: 下載完成對話框不再播放系統音效

### 🔧 技術改進
- 新增自定義對話框樣式設計
- 改進檔案目錄開啟功能，支援多平台
- 新增用戶偏好設定管理
- 優化下載完成流程

### 📋 新增功能
- 下載完成自定義對話框
- 開啟檔案目錄按鈕
- 下載完成提醒設定選項
- 跨平台檔案目錄開啟支援

### 🎨 用戶體驗提升
- 更美觀的下載完成提示
- 一鍵開啟檔案目錄
- 可自訂是否顯示提醒視窗
- 無音效干擾

## [V1.1.0] - 2024-12-19

### 🎯 主要改進
- **解析度動態載入**: 修正解析度選項問題，改為動態載入影片實際可用的解析度
- **視窗大小修正**: 修正視窗無法調整大小問題，設定最小尺寸 800x600，預設 1000x800
- **停止下載功能**: 新增「停止下載」按鈕，可隨時中斷下載
- **移除日韓文**: 簡化介面，移除日韓文，只保留中英文
- **智能錯誤分析**: 新增自動錯誤分析功能，提供具體解決建議
- **版本資訊顯示**: 新增版本資訊顯示和更新建議

### 🔧 技術改進
- 改進錯誤處理機制
- 新增按鈕狀態管理
- 優化下載進度監控
- 增強用戶體驗

### 🐛 錯誤修正
- 修正視窗拖曳調整大小問題
- 修正解析度選項不準確問題
- 修正介面語言混亂問題

### 📋 新增功能
- 動態解析度載入
- 智能錯誤分析
- 版本資訊顯示
- 停止下載功能
- 更新建議提供

### 🎉 初始版本
- 基本 YouTube 影片下載功能
- PySide6 GUI 介面
- 多語言支援（中英日韓）
- 用戶偏好記憶功能
- 下載歷史記錄
- 多種下載格式支援（影片、音訊）
- SSL 問題修復
- 年齡限制處理
- 檔案名稱清理功能

## [V1.0] - 2024-12-19

### 🎉 新增功能 / Added / 追加 / 추가됨
- **初始版本發布** / Initial Release / 初回リリース / 초기 릴리스
- 多格式影片下載支援 (MP4, WebM, 等)
- 多語言使用者介面 (中文、英文、日文、韓文)
- 自訂下載路徑選擇功能
- 即時下載進度和速度顯示
- 音訊轉換功能 (MP3, WAV 格式)
- 背景下載，不阻塞使用者介面
- 用戶偏好設定管理系統
- 下載歷史記錄功能
- 最近使用 URL 下拉選單
- 右鍵選單功能

### 🛠️ 技術改進 / Technical Improvements / 技術的改善 / 기술적 개선
- SSL 證書驗證問題修復
- 完整的錯誤處理機制
- 年齡限制影片處理
- PyQt6 到 PySide6 的遷移
- 多個備用版本提供 (PySide6, 簡化 GUI, 命令行)
- 強化的檔案名稱處理
- 改進的進度顯示機制

### 🔧 修復問題 / Fixed / 修正 / 수정됨
- Windows DLL 載入錯誤
- SSL 證書驗證失敗問題
- 下載按鈕無法點擊問題
- 檔案名稱錯誤問題
- 年齡限制影片無法下載問題
- 進度顯示不準確問題

### 📁 檔案結構 / File Structure / ファイル構造 / 파일 구조
```
關鍵字查詢/
├── src/                    # 源代碼目錄
│   ├── main.py            # 主程式 (PyQt6)
│   ├── main_pyside.py     # 主程式 (PySide6)
│   ├── cli_downloader.py  # 命令行版本
│   ├── simple_gui.py      # 簡化 GUI 版本
│   ├── debug_gui.py       # 除錯 GUI 版本
│   ├── fixed_downloader.py # 修復版本下載器
│   ├── ultimate_downloader.py # 終極版本下載器
│   ├── ssl_fix.py         # SSL 修復模組
│   ├── user_preferences.py # 用戶偏好管理
│   └── ui/                # UI 相關文件
│       ├── main_window.py # PyQt6 主視窗
│       └── main_window_pyside.py # PySide6 主視窗
├── requirements.txt       # Python 依賴
├── install_dependencies.py # 依賴安裝腳本
├── start_downloader.py   # 啟動腳本
├── run_downloader.py     # 運行腳本
├── quick_test.py         # 快速測試
├── simple_test.py        # 簡單測試
├── test_*.py             # 各種測試腳本
├── README.md             # 專案說明
├── 使用說明.md           # 使用說明
├── 執行說明.md           # 執行說明
├── VERSION               # 版本信息
└── CHANGELOG.md          # 變更日誌
```

### 🌍 多語言支援 / Multi-language Support / 多言語サポート / 다국어 지원
- **中文 (繁體)** / Chinese (Traditional) / 中国語（繁体字） / 중국어 (번체)
- **English** / 英文 / 英語 / 영어
- **日本語** / Japanese / 日語 / 일본어
- **한국어** / Korean / 韓国語 / 한국어

### 📋 測試腳本 / Test Scripts / テストスクリプト / 테스트 스크립트
- `test_download.py` - 基本下載測試
- `test_age_restriction.py` - 年齡限制測試
- `test_filename.py` - 檔案名稱測試
- `test_title_extraction.py` - 標題提取測試

### ⚠️ 已知問題 / Known Issues / 既知の問題 / 알려진 문제
- SSL 證書問題在某些網路環境下仍可能出現
- 需要定期更新 yt-dlp 和 certifi 套件
- 某些地區限制的影片可能無法下載

### 🔮 未來計劃 / Future Plans / 今後の計画 / 향후 계획
- 批次下載功能
- 播放清單下載支援
- 更多格式選項
- 下載速度限制功能
- 代理伺服器支援
- 更多語言支援

## V1.4 (2024-12-25)
### 新增功能
- **高解析度下載支援**：改進格式選擇邏輯，支援1080P及更高解析度
- **前綴歷史記錄**：記錄並顯示過往使用的檔案名稱前綴，支援選擇和刪除
- **檢查更新按鈕**：在主界面添加按鈕，一鍵檢查並更新yt-dlp
- **多層備用下載策略**：確保下載成功率，自動嘗試備用格式
- **合併失敗處理**：當視頻和音頻合併失敗時，保留已下載的檔案

### 界面優化
- **URL輸入框改進**：變大並改為垂直佈局，可容納更多文字
- **界面元素重組**：將相關功能集中在一起，優化用戶體驗

### 技術改進
- 使用 `bestvideo+bestaudio/best` 格式選擇器替代簡單的 `best`
- 根據選擇的解析度動態調整下載參數
- 改進錯誤處理機制，提供更詳細的錯誤訊息

---

**版本 V1.0 代表了一個功能完整、經過充分測試的 YouTube 影片下載器，具備了現代化 GUI 應用程式的所有基本功能。**

## [1.64] - 2025-07-06

### 新增功能
- 添加對年齡限制影片的 cookies 支援
- 在設定頁籤中添加 cookies 設定選項
- 添加「前往設定」按鈕，方便用戶快速跳轉到設定頁面

### 改進
- 優化年齡限制影片的檢測邏輯
- 改進年齡限制錯誤的處理流程
- 提供更詳細的年齡限制錯誤訊息和解決方案
- 改進 cookies 設定的保存和讀取

### 修復
- 修復在處理年齡限制錯誤時可能開啟多個視窗的問題
- 修復在找不到下載項時的錯誤處理
- 修復備用下載方法中的錯誤處理邏輯

## [1.63] - 2025-06-25

### 新增功能
- 添加已下載檔案頁籤，方便管理下載內容
- 添加檔案合併功能，支援合併分段下載的影片
- 添加下載完成通知功能

### 改進
- 改進下載進度顯示
- 優化下載速度計算
- 改進檔案名稱處理，支援更多特殊字符

### 修復
- 修復在某些情況下下載卡住的問題
- 修復下載取消後資源未正確釋放的問題
- 修復設定頁面中某些選項無法保存的問題

## [1.62] - 2025-06-10

### 新增功能
- 添加多種下載格式選擇
- 添加解析度選擇功能
- 添加下載暫停和繼續功能

### 改進
- 改進用戶界面設計
- 優化下載線程管理
- 添加更多錯誤處理和恢復機制

### 修復
- 修復在下載大檔案時可能崩潰的問題
- 修復在某些網絡環境下無法下載的問題
- 修復界面在高 DPI 顯示器上的縮放問題

## [1.61] - 2025-05-20

### 新增功能
- 初始版本發布
- 基本的 YouTube 影片下載功能
- 簡單的用戶界面
- 支援基本的下載選項 